{{template "_header.html" .}}
{{template "_nav_main.html" .}}

<!-- This div is a rudimentary way to target repo-flow with step-specific CSS -->
<div data-repo-flow-step="edit"></div>
{{template "_repo-flow.html" .}}

<main id="new-editor">

	<nav id="new-editor-files-nav">

		<div id="files-show-tag" class="showing">
			<span class="hidden" title="Show files">￫</span>
			<span class="showing" title="Hide files">￩</span>
			<!-- <img class="hidden" src="/img/file-folder-open.svg" alt="Show files"/><img class="showing" src="/img/file-folder-closed.svg" alt="Close files" /> -->
		</div>

		<div class="file-container" id="all-files-editor-container">
			<div id="all-files-editor" data-instance="AllFilesList"> </div>
		</div>
	</nav>

	<section class="section-editor" id="file-editors">

		<div class="editor-actions" id="editor-actions">
			<button id="repo-new-file" class="btn">New file</button>

			{{/* The text for the delete button is set by JS in RepoFileEditorCM[2].ts */}}
			<button id="editor-delete-button" title="Delete file" class="btn">Delete file</button>

			<button id="editor-rename-button" class="btn">Rename file</button>
			<button class="btn" id="editor-save-button">Save file</button>
			<button id="repo-save-all" class="btn">Save all files</button>
			<button id="editor-undo-button" class="btn">Undo edit</button>
			<div id="editor-output-button" class="btn">Output
				<ul class="editor-output-buttons">
					<li href="#" id="repo-jekyll" >Web version</li>
					<li id="repo-print-screen" >Screen PDF</li>
					<li id="repo-print-printer" >Print PDF</li>
					<!-- <li disabled >Epub</li> -->
				</ul>
			</div>
		</div>

		<div class="file-title">
			<span ebw-bind="current-filename"></span>
		</div>

		<div class="editor" id="editor" ebw-repo="{{.RepoName}}" data-instance="RepoFileEditor"></div>

	</section>

	<script type="text/hidden" id="ebw-context" data-repo-owner="{{.RepoOwner}}" data-repo-name="{{.RepoName}}"  data-username="{{.Username}}" data-page="RepoEditorPage"></script>

	<script type="text/javascript">
	window.repoEditorData = {
		"files": {{.RepoFiles}},
		"ignoreFilter": {{.ProseIgnoreFilter}},
		"filesAndHashes": {{.FilesAndHashes}}
	};
	</script>

</main>

{{template "_nav_footer.html" .}}
{{template "_footer.html" .}}
